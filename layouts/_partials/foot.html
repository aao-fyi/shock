{{ $sourceJS := slice }}



{{/* Shock */}}
{{ $shockJS := resources.Get "js/shock.js" }}
{{ $siteJS := resources.Get "js/site.js" }}

{{ if or ($shockJS.Content) ($siteJS.Content) }}
  {{ $buildSRC := slice $shockJS $siteJS }}

  {{ $buildOpts := dict
    "minify" (not hugo.IsDevelopment)
    "sourceMap" (cond hugo.IsDevelopment "external" "")
    "targetPath" "js/build.min.js"
  }}

  {{ $buildJS := $buildSRC | resources.Concat "js/build.js" | js.Build $buildOpts }}

  {{ $sourceJS = $sourceJS | append $buildJS }}
{{ end }}



{{/* Main */}}
{{ if $sourceJS }}
  {{ $mainJS := $sourceJS | resources.Concat "js/main.js" }}
  {{ $mainSRI := $mainJS | resources.Fingerprint "sha384" }}
  <script defer src="{{ $mainSRI.RelPermalink }}" integrity="{{ $mainSRI.Data.Integrity }}"></script>
{{ end }}

